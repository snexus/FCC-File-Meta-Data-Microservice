<!DOCTYPE html>
<html>
<body>
<link href="/public/css/main.css" rel="stylesheet" type="text/css">
<link href='https://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>

<div class="center">
  <h1 class="heading"> FCC API project: File MetaData Microservice</h1>
  <blockquote>
    <span>User stories:</span>
    <p>1) I can submit a FormData object that includes a file upload.</p>
    <p>2) When I submit something, I will receive the file size in bytes within the JSON response</p>

  </blockquote>
  <div class="example">
   <h3>Example usage (view source to see how it works programatically) </h3>
        <form  method="POST" enctype="multipart/form-data">
          Select a file to upload:
          <p><input type="file" name="upl"> </p>
          <p><input type="submit" value="Upload File"></p>
</form>
  </div>
</div>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script type="text/javascript">
		$(document).ready(function() {
			$('form').on('submit', function(event) {
                
				 event.stopPropagation();
				 event.preventDefault();
				var formElement = document.querySelector("form");
				var data = new FormData(formElement)
				$.ajax({
					url: window.location.origin + '/metadata/',
					type: 'POST',
					data: data,
					cache: false,
					processData: false,
					contentType: false,
					error: function(jqXHR, textStatus, errorThrown) {
						alert('ERRORS: ' + textStatus);
					},
					success: function(data) {
						alert('FILE SIZE: ' + data.fileSize);
					}
				});
			});
		});
	</script>
</body>
</html>

